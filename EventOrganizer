import java.util.Scanner;

public class EventOrganizer {
    private EventCalendar eventCalendar;
    public EventOrganizer(){
        this.eventCalendar = new EventCalendar();
    }

    public void run() {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Please enter an event: ");
        String input, token, inputDate, timeOfTheDay,building,department,email,duration;
        input = token = inputDate = timeOfTheDay = building = department = email = duration = null;

        while (true) {          //gets user input
            input = scanner.nextLine();
            if (input.equalsIgnoreCase("Q")) {
                break;
            }
        }
        String[] userInputArray = input.split(" "); //splits input into separate strings
        if (userInputArray.length<5) {
            token = userInputArray[0].toUpperCase();
            inputDate = userInputArray[1];
            timeOfTheDay = userInputArray[2];
             building = userInputArray[3];
        }
         if (userInputArray.length>5){
             department = userInputArray[4];
             email = userInputArray[5];
             duration = userInputArray[6];
        }

        switch (token) {
            case "A":
                eventCalendar.add(CreateEvent(inputDate, timeOfTheDay,
                    building,department,email,duration));
                break;
            case "R":
                Date d = new Date(inputDate);
                Timeslot ts = Timeslot.valueOf(timeOfTheDay.toUpperCase());
                Location l = Location.valueOf(building.toUpperCase());
                if(d.isValid()) {
                    Event event = new Event(d, ts, l);
                    eventCalendar.remove(event);
                }
                break;
            case "P":
                eventCalendar.print();
                break;
            case "PE":
                eventCalendar.printByDate();
                break;
            case "PC":
                eventCalendar.printByCampus();
                break;
            case "PD":
                eventCalendar.printByDepartment();
                break;
            default:
                System.out.println("Invalid command. Please enter a valid command: ");

        }
    }

        //this method will record user input and create an Event object
        public Event CreateEvent( String date, String timeOfTheDay,
                String building, String department, String email, String dur) {

            timeOfTheDay = timeOfTheDay.toUpperCase();

            Date d = new Date(date);
            //retrieving and setting enum classes with user input
            Timeslot timeslot = Timeslot.valueOf(timeOfTheDay.toUpperCase());
            Location location = Location.valueOf(building.toUpperCase());
            Department department1 = Department.valueOf(department.toUpperCase());

            int duration = Integer.parseInt(dur); // converting userInput string duration to int

            if (d.isValid()) {  //checks if date is valid
                Event event = new Event(new Date(date),
                        timeslot, location, new Contact(department1, email), duration);

                return event;     //returns event
            }
            return null;
        }


        }








